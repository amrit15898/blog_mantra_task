{% extends 'base.html' %}

{% block content %}
<div class="container">
    <div class="detail-blog flex">
        <h1>{{blog.title}}</h1>
         <!-- <b><span>Published</span>  {{blog.author}}</b> -->
         <p>Published   {{blog.created_at}} by <b>{{blog.author}}</b></p>
        {{blog.content|safe}}
        <div class="other-detail flex">
           
            <p><form id="email-form" method="post">
                {% csrf_token %}
                <input type="email" name="recipient-email" placeholder="Recipient's Email" required>
                <button type="submit" name="send_email">Send via Email</button>
            </form></p>
        </div>
        <button id="showCommentForm">Comment</button>
        <div class="cmnt-form" style="display: none;">
            <form action="" method="post">
                {% csrf_token %}
                <textarea rows="4" cols="50" name="cmnt">

                </textarea>
                <button type="submit">
                    Comment
                </button>
            </form>
        </div>
       
    </div>
    <div class="comments-shows flex">
        {% for comment in comments %}
            <div class="cmnt">
                <b>{{comment.author.username}}</b>
                <p>{{comment.content}}</p>
                <p>{{comment.created_at}}</p>
            </div>
            <form action="{% url 'like_comment' comment.id %}" method="post">
                {% csrf_token %}
                
                {% if request.user in comment.like.all %}
                <button type="submit">Unlike {{comment.like.count}}</button>
                {% else %}

                <button type="submit">Like</button>
                {% endif %}
            </form>
            <span>{{ comment.like.count }}</span>
        {% endfor %}
    </div>
</div>
{% endblock content %}